{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate,Link}from'react-router-dom';import{getCart,checkout}from'../services/api';import{loadStripe}from'@stripe/stripe-js';import{Elements,CardElement,useStripe,useElements}from'@stripe/react-stripe-js';import config from'../config';// Initialize Stripe with your public key from config\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const stripePromise=loadStripe(config.stripePublicKey);// Checkout Form Component\nconst CheckoutForm=_ref=>{let{cart,cartItems,products,userId,onSuccess}=_ref;const stripe=useStripe();const elements=useElements();const navigate=useNavigate();const[processing,setProcessing]=useState(false);const[error,setError]=useState(null);const[success,setSuccess]=useState(false);const[formData,setFormData]=useState({firstName:'',lastName:'',email:'',address:'',city:'',state:'',postalCode:'',country:'US'});const handleChange=e=>{const{name,value}=e.target;setFormData({...formData,[name]:value});};const handleSubmit=async e=>{e.preventDefault();if(!stripe||!elements){// Stripe.js has not loaded yet\nreturn;}setProcessing(true);setError(null);try{// In a real app, you would create a payment intent on your server\n// and pass the client_secret to this function\n// This is a simulated payment flow for demo purposes\n// In a real implementation, you would call the Stripe API\n/*\r\n            const { error, paymentMethod } = await stripe.createPaymentMethod({\r\n                type: 'card',\r\n                card: elements.getElement(CardElement),\r\n                billing_details: {\r\n                    name: `${formData.firstName} ${formData.lastName}`,\r\n                    email: formData.email,\r\n                    address: {\r\n                        line1: formData.address,\r\n                        city: formData.city,\r\n                        state: formData.state,\r\n                        postal_code: formData.postalCode,\r\n                        country: formData.country\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (error) {\r\n                throw new Error(error.message);\r\n            }\r\n            */// Call your backend to process the order\nawait checkout(userId);setSuccess(true);onSuccess();// Redirect to order confirmation after a short delay\nsetTimeout(()=>{navigate('/orders');},2000);}catch(err){console.error('Payment processing error:',err);setError(err.message||'An error occurred during checkout. Please try again.');}finally{setProcessing(false);}};const calculateSubtotal=()=>{return cartItems.reduce((total,item)=>{const product=products[item.product_id];return total+(product?parseFloat(product.price)*item.quantity:0);},0).toFixed(2);};const calculateTax=()=>{const subtotal=parseFloat(calculateSubtotal());return(subtotal*0.08).toFixed(2);// Assuming 8% tax rate\n};const calculateShipping=()=>{return\"5.99\";// Flat shipping rate for demo\n};const calculateTotal=()=>{return(parseFloat(calculateSubtotal())+parseFloat(calculateTax())+parseFloat(calculateShipping())).toFixed(2);};const cardElementOptions={style:{base:{fontSize:'16px',color:'#424770','::placeholder':{color:'#aab7c4'}},invalid:{color:'#9e2146'}}};if(success){return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 p-6 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-16 h-16 text-green-500 mx-auto mb-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M5 13l4 4L19 7\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-2\",children:\"Order Successful!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Thank you for your purchase. We're processing your order now.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"You will be redirected to your orders page shortly...\"})]});}return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Contact Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"firstName\",className:\"block text-sm font-medium text-gray-700\",children:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"firstName\",name:\"firstName\",value:formData.firstName,onChange:handleChange,required:true,className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lastName\",className:\"block text-sm font-medium text-gray-700\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"lastName\",name:\"lastName\",value:formData.lastName,onChange:handleChange,required:true,className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-sm font-medium text-gray-700\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:formData.email,onChange:handleChange,required:true,className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Shipping Address\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"address\",className:\"block text-sm font-medium text-gray-700\",children:\"Street Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"address\",name:\"address\",value:formData.address,onChange:handleChange,required:true,className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"city\",className:\"block text-sm font-medium text-gray-700\",children:\"City\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"city\",name:\"city\",value:formData.city,onChange:handleChange,required:true,className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"state\",className:\"block text-sm font-medium text-gray-700\",children:\"State / Province\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"state\",name:\"state\",value:formData.state,onChange:handleChange,required:true,className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"postalCode\",className:\"block text-sm font-medium text-gray-700\",children:\"Postal Code\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"postalCode\",name:\"postalCode\",value:formData.postalCode,onChange:handleChange,required:true,className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"country\",className:\"block text-sm font-medium text-gray-700\",children:\"Country\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"country\",name:\"country\",value:formData.country,onChange:handleChange,required:true,className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"US\",children:\"United States\"}),/*#__PURE__*/_jsx(\"option\",{value:\"CA\",children:\"Canada\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MX\",children:\"Mexico\"}),/*#__PURE__*/_jsx(\"option\",{value:\"UK\",children:\"United Kingdom\"}),/*#__PURE__*/_jsx(\"option\",{value:\"FR\",children:\"France\"}),/*#__PURE__*/_jsx(\"option\",{value:\"DE\",children:\"Germany\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Payment Information\"}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border border-gray-300 rounded-md\",children:/*#__PURE__*/_jsx(CardElement,{options:cardElementOptions})}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-500\",children:\"Test Mode: Use card 4242 4242 4242 4242, any future date, any 3 digits for CVC, and any 5 digits for postal code.\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border-l-4 border-red-500 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 text-red-400\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",clipRule:\"evenodd\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-3\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-700\",children:error})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(Link,{to:\"/cart\",className:\"text-blue-600 hover:text-blue-800\",children:\"Back to Cart\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!stripe||processing,className:`bg-blue-600 text-white px-6 py-3 rounded-md font-medium ${!stripe||processing?'opacity-70 cursor-not-allowed':'hover:bg-blue-700'}`,children:processing?'Processing...':`Pay $${calculateTotal()}`})]})]});};// Main Checkout Component\nconst Checkout=_ref2=>{let{userId}=_ref2;const[cart,setCart]=useState(null);const[cartItems,setCartItems]=useState([]);const[products,setProducts]=useState({});const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[orderComplete,setOrderComplete]=useState(false);const navigate=useNavigate();useEffect(()=>{const fetchCart=async()=>{try{setLoading(true);const response=await getCart(userId);setCart(response.data);if(response.data&&response.data.CartItems){setCartItems(response.data.CartItems);// Create a map of product details\nconst productMap={};for(const item of response.data.CartItems){productMap[item.product_id]=item.Product;}setProducts(productMap);}}catch(err){console.error('Error fetching cart:',err);setError('Failed to load your cart. Please try again later.');}finally{setLoading(false);}};if(userId){fetchCart();}else{setLoading(false);setError('Please log in to proceed with checkout');}},[userId]);const handleCheckoutSuccess=()=>{setOrderComplete(true);};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center py-20 text-gray-600\",children:\"Loading checkout information...\"});if(error)return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-center py-8\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Link,{to:\"/cart\",className:\"text-blue-600 hover:underline\",children:\"Return to Cart\"})})]});if(!cartItems.length)return/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-8 text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-4\",children:\"Your cart is empty\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"You need to add items to your cart before checking out.\"}),/*#__PURE__*/_jsx(Link,{to:\"/products\",className:\"inline-block bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors\",children:\"Browse Products\"})]})});return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-center mb-8\",children:\"Checkout\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:w-2/3\",children:/*#__PURE__*/_jsx(Elements,{stripe:stripePromise,children:/*#__PURE__*/_jsx(CheckoutForm,{cart:cart,cartItems:cartItems,products:products,userId:userId,onSuccess:handleCheckoutSuccess})})}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:w-1/3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Order Summary\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4 mb-6\",children:cartItems.map(item=>{const product=products[item.product_id];return product?/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-10 w-10 mr-3 bg-gray-200 rounded overflow-hidden\",children:/*#__PURE__*/_jsx(\"img\",{src:product.image||`https://placehold.co/300x200?text=${encodeURIComponent(product.name)}`,alt:product.name,className:\"w-full h-full object-contain p-2\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium\",children:product.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"Qty: \",item.quantity]})]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium\",children:[\"$\",(parseFloat(product.price)*item.quantity).toFixed(2)]})]},item.id):null;})}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-200 pt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between my-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Subtotal\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[\"$\",cartItems.reduce((total,item)=>{const product=products[item.product_id];return total+(product?parseFloat(product.price)*item.quantity:0);},0).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between my-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Shipping\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"$5.99\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between my-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Tax\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[\"$\",(cartItems.reduce((total,item)=>{const product=products[item.product_id];return total+(product?parseFloat(product.price)*item.quantity:0);},0)*0.08).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-200 mt-4 pt-4 flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-bold\",children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-bold\",children:[\"$\",(cartItems.reduce((total,item)=>{const product=products[item.product_id];return total+(product?parseFloat(product.price)*item.quantity:0);},0)*1.08+5.99).toFixed(2)]})]})]})]})})]})]});};export default Checkout;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Link","getCart","checkout","loadStripe","Elements","CardElement","useStripe","useElements","config","jsx","_jsx","jsxs","_jsxs","stripePromise","stripePublicKey","CheckoutForm","_ref","cart","cartItems","products","userId","onSuccess","stripe","elements","navigate","processing","setProcessing","error","setError","success","setSuccess","formData","setFormData","firstName","lastName","email","address","city","state","postalCode","country","handleChange","e","name","value","target","handleSubmit","preventDefault","setTimeout","err","console","message","calculateSubtotal","reduce","total","item","product","product_id","parseFloat","price","quantity","toFixed","calculateTax","subtotal","calculateShipping","calculateTotal","cardElementOptions","style","base","fontSize","color","invalid","className","children","fill","stroke","viewBox","xmlns","strokeLinecap","strokeLinejoin","strokeWidth","d","onSubmit","htmlFor","type","id","onChange","required","options","fillRule","clipRule","to","disabled","Checkout","_ref2","setCart","setCartItems","setProducts","loading","setLoading","orderComplete","setOrderComplete","fetchCart","response","data","CartItems","productMap","Product","handleCheckoutSuccess","length","map","src","image","encodeURIComponent","alt"],"sources":["C:/Users/Emili/Desktop/Studies/Codecademy/ecommerce-api/client/src/pages/Checkout.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { getCart, checkout } from '../services/api';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport { Elements, CardElement, useStripe, useElements } from '@stripe/react-stripe-js';\r\nimport config from '../config';\r\n\r\n// Initialize Stripe with your public key from config\r\nconst stripePromise = loadStripe(config.stripePublicKey);\r\n\r\n// Checkout Form Component\r\nconst CheckoutForm = ({ cart, cartItems, products, userId, onSuccess }) => {\r\n    const stripe = useStripe();\r\n    const elements = useElements();\r\n    const navigate = useNavigate();\r\n    const [processing, setProcessing] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const [success, setSuccess] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n        firstName: '',\r\n        lastName: '',\r\n        email: '',\r\n        address: '',\r\n        city: '',\r\n        state: '',\r\n        postalCode: '',\r\n        country: 'US'\r\n    });\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData({\r\n            ...formData,\r\n            [name]: value\r\n        });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (!stripe || !elements) {\r\n            // Stripe.js has not loaded yet\r\n            return;\r\n        }\r\n\r\n        setProcessing(true);\r\n        setError(null);\r\n\r\n        try {\r\n            // In a real app, you would create a payment intent on your server\r\n            // and pass the client_secret to this function\r\n\r\n            // This is a simulated payment flow for demo purposes\r\n            // In a real implementation, you would call the Stripe API\r\n            /*\r\n            const { error, paymentMethod } = await stripe.createPaymentMethod({\r\n                type: 'card',\r\n                card: elements.getElement(CardElement),\r\n                billing_details: {\r\n                    name: `${formData.firstName} ${formData.lastName}`,\r\n                    email: formData.email,\r\n                    address: {\r\n                        line1: formData.address,\r\n                        city: formData.city,\r\n                        state: formData.state,\r\n                        postal_code: formData.postalCode,\r\n                        country: formData.country\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (error) {\r\n                throw new Error(error.message);\r\n            }\r\n            */\r\n\r\n            // Call your backend to process the order\r\n            await checkout(userId);\r\n\r\n            setSuccess(true);\r\n            onSuccess();\r\n\r\n            // Redirect to order confirmation after a short delay\r\n            setTimeout(() => {\r\n                navigate('/orders');\r\n            }, 2000);\r\n\r\n        } catch (err) {\r\n            console.error('Payment processing error:', err);\r\n            setError(err.message || 'An error occurred during checkout. Please try again.');\r\n        } finally {\r\n            setProcessing(false);\r\n        }\r\n    };\r\n\r\n    const calculateSubtotal = () => {\r\n        return cartItems.reduce((total, item) => {\r\n            const product = products[item.product_id];\r\n            return total + (product ? parseFloat(product.price) * item.quantity : 0);\r\n        }, 0).toFixed(2);\r\n    };\r\n\r\n    const calculateTax = () => {\r\n        const subtotal = parseFloat(calculateSubtotal());\r\n        return (subtotal * 0.08).toFixed(2); // Assuming 8% tax rate\r\n    };\r\n\r\n    const calculateShipping = () => {\r\n        return \"5.99\"; // Flat shipping rate for demo\r\n    };\r\n\r\n    const calculateTotal = () => {\r\n        return (\r\n            parseFloat(calculateSubtotal()) +\r\n            parseFloat(calculateTax()) +\r\n            parseFloat(calculateShipping())\r\n        ).toFixed(2);\r\n    };\r\n\r\n    const cardElementOptions = {\r\n        style: {\r\n            base: {\r\n                fontSize: '16px',\r\n                color: '#424770',\r\n                '::placeholder': {\r\n                    color: '#aab7c4',\r\n                },\r\n            },\r\n            invalid: {\r\n                color: '#9e2146',\r\n            },\r\n        },\r\n    };\r\n\r\n    if (success) {\r\n        return (\r\n            <div className=\"bg-green-50 p-6 rounded-lg text-center\">\r\n                <svg className=\"w-16 h-16 text-green-500 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 13l4 4L19 7\"></path>\r\n                </svg>\r\n                <h2 className=\"text-2xl font-bold text-gray-800 mb-2\">Order Successful!</h2>\r\n                <p className=\"text-gray-600 mb-4\">Thank you for your purchase. We're processing your order now.</p>\r\n                <p className=\"text-gray-600\">You will be redirected to your orders page shortly...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            <div>\r\n                <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Contact Information</h3>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div>\r\n                        <label htmlFor=\"firstName\" className=\"block text-sm font-medium text-gray-700\">First Name</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"firstName\"\r\n                            name=\"firstName\"\r\n                            value={formData.firstName}\r\n                            onChange={handleChange}\r\n                            required\r\n                            className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label htmlFor=\"lastName\" className=\"block text-sm font-medium text-gray-700\">Last Name</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"lastName\"\r\n                            name=\"lastName\"\r\n                            value={formData.lastName}\r\n                            onChange={handleChange}\r\n                            required\r\n                            className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"mt-4\">\r\n                    <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">Email Address</label>\r\n                    <input\r\n                        type=\"email\"\r\n                        id=\"email\"\r\n                        name=\"email\"\r\n                        value={formData.email}\r\n                        onChange={handleChange}\r\n                        required\r\n                        className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            <div>\r\n                <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Shipping Address</h3>\r\n                <div className=\"space-y-4\">\r\n                    <div>\r\n                        <label htmlFor=\"address\" className=\"block text-sm font-medium text-gray-700\">Street Address</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"address\"\r\n                            name=\"address\"\r\n                            value={formData.address}\r\n                            onChange={handleChange}\r\n                            required\r\n                            className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                        <div>\r\n                            <label htmlFor=\"city\" className=\"block text-sm font-medium text-gray-700\">City</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                id=\"city\"\r\n                                name=\"city\"\r\n                                value={formData.city}\r\n                                onChange={handleChange}\r\n                                required\r\n                                className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <label htmlFor=\"state\" className=\"block text-sm font-medium text-gray-700\">State / Province</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                id=\"state\"\r\n                                name=\"state\"\r\n                                value={formData.state}\r\n                                onChange={handleChange}\r\n                                required\r\n                                className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <label htmlFor=\"postalCode\" className=\"block text-sm font-medium text-gray-700\">Postal Code</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                id=\"postalCode\"\r\n                                name=\"postalCode\"\r\n                                value={formData.postalCode}\r\n                                onChange={handleChange}\r\n                                required\r\n                                className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <label htmlFor=\"country\" className=\"block text-sm font-medium text-gray-700\">Country</label>\r\n                        <select\r\n                            id=\"country\"\r\n                            name=\"country\"\r\n                            value={formData.country}\r\n                            onChange={handleChange}\r\n                            required\r\n                            className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\r\n                        >\r\n                            <option value=\"US\">United States</option>\r\n                            <option value=\"CA\">Canada</option>\r\n                            <option value=\"MX\">Mexico</option>\r\n                            <option value=\"UK\">United Kingdom</option>\r\n                            <option value=\"FR\">France</option>\r\n                            <option value=\"DE\">Germany</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div>\r\n                <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Payment Information</h3>\r\n                <div className=\"p-4 border border-gray-300 rounded-md\">\r\n                    <CardElement options={cardElementOptions} />\r\n                </div>\r\n                <p className=\"mt-2 text-sm text-gray-500\">\r\n                    Test Mode: Use card 4242 4242 4242 4242, any future date, any 3 digits for CVC, and any 5 digits for postal code.\r\n                </p>\r\n            </div>\r\n\r\n            {error && (\r\n                <div className=\"bg-red-50 border-l-4 border-red-500 p-4\">\r\n                    <div className=\"flex\">\r\n                        <div className=\"flex-shrink-0\">\r\n                            <svg className=\"h-5 w-5 text-red-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                                <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\r\n                            </svg>\r\n                        </div>\r\n                        <div className=\"ml-3\">\r\n                            <p className=\"text-sm text-red-700\">{error}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"flex justify-between\">\r\n                <Link to=\"/cart\" className=\"text-blue-600 hover:text-blue-800\">\r\n                    Back to Cart\r\n                </Link>\r\n                <button\r\n                    type=\"submit\"\r\n                    disabled={!stripe || processing}\r\n                    className={`bg-blue-600 text-white px-6 py-3 rounded-md font-medium ${(!stripe || processing) ? 'opacity-70 cursor-not-allowed' : 'hover:bg-blue-700'}`}\r\n                >\r\n                    {processing ? 'Processing...' : `Pay $${calculateTotal()}`}\r\n                </button>\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n\r\n// Main Checkout Component\r\nconst Checkout = ({ userId }) => {\r\n    const [cart, setCart] = useState(null);\r\n    const [cartItems, setCartItems] = useState([]);\r\n    const [products, setProducts] = useState({});\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [orderComplete, setOrderComplete] = useState(false);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const fetchCart = async () => {\r\n            try {\r\n                setLoading(true);\r\n                const response = await getCart(userId);\r\n                setCart(response.data);\r\n\r\n                if (response.data && response.data.CartItems) {\r\n                    setCartItems(response.data.CartItems);\r\n\r\n                    // Create a map of product details\r\n                    const productMap = {};\r\n                    for (const item of response.data.CartItems) {\r\n                        productMap[item.product_id] = item.Product;\r\n                    }\r\n                    setProducts(productMap);\r\n                }\r\n            } catch (err) {\r\n                console.error('Error fetching cart:', err);\r\n                setError('Failed to load your cart. Please try again later.');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        if (userId) {\r\n            fetchCart();\r\n        } else {\r\n            setLoading(false);\r\n            setError('Please log in to proceed with checkout');\r\n        }\r\n    }, [userId]);\r\n\r\n    const handleCheckoutSuccess = () => {\r\n        setOrderComplete(true);\r\n    };\r\n\r\n    if (loading) return <div className=\"flex justify-center items-center py-20 text-gray-600\">Loading checkout information...</div>;\r\n\r\n    if (error) return (\r\n        <div className=\"container mx-auto px-4 py-12\">\r\n            <div className=\"text-red-500 text-center py-8\">{error}</div>\r\n            <div className=\"text-center\">\r\n                <Link to=\"/cart\" className=\"text-blue-600 hover:underline\">\r\n                    Return to Cart\r\n                </Link>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    if (!cartItems.length) return (\r\n        <div className=\"container mx-auto px-4 py-12\">\r\n            <div className=\"bg-white rounded-lg shadow-md p-8 text-center\">\r\n                <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">Your cart is empty</h2>\r\n                <p className=\"text-gray-600 mb-6\">You need to add items to your cart before checking out.</p>\r\n                <Link\r\n                    to=\"/products\"\r\n                    className=\"inline-block bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors\"\r\n                >\r\n                    Browse Products\r\n                </Link>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className=\"container mx-auto px-4 py-8\">\r\n            <h1 className=\"text-3xl font-bold text-center mb-8\">Checkout</h1>\r\n\r\n            <div className=\"flex flex-col lg:flex-row gap-8\">\r\n                <div className=\"lg:w-2/3\">\r\n                    <Elements stripe={stripePromise}>\r\n                        <CheckoutForm\r\n                            cart={cart}\r\n                            cartItems={cartItems}\r\n                            products={products}\r\n                            userId={userId}\r\n                            onSuccess={handleCheckoutSuccess}\r\n                        />\r\n                    </Elements>\r\n                </div>\r\n\r\n                <div className=\"lg:w-1/3\">\r\n                    <div className=\"bg-gray-50 p-6 rounded-lg shadow-md\">\r\n                        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Order Summary</h3>\r\n\r\n                        <div className=\"space-y-4 mb-6\">\r\n                            {cartItems.map(item => {\r\n                                const product = products[item.product_id];\r\n                                return product ? (\r\n                                    <div key={item.id} className=\"flex justify-between\">\r\n                                        <div className=\"flex items-center\">\r\n                                            <div className=\"h-10 w-10 mr-3 bg-gray-200 rounded overflow-hidden\">\r\n                                                <img\r\n                                                    src={product.image || `https://placehold.co/300x200?text=${encodeURIComponent(product.name)}`}\r\n                                                    alt={product.name}\r\n                                                    className=\"w-full h-full object-contain p-2\"\r\n                                                />\r\n                                            </div>\r\n                                            <div>\r\n                                                <p className=\"text-sm font-medium\">{product.name}</p>\r\n                                                <p className=\"text-xs text-gray-500\">Qty: {item.quantity}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <p className=\"font-medium\">\r\n                                            ${(parseFloat(product.price) * item.quantity).toFixed(2)}\r\n                                        </p>\r\n                                    </div>\r\n                                ) : null;\r\n                            })}\r\n                        </div>\r\n\r\n                        <div className=\"border-t border-gray-200 pt-4\">\r\n                            <div className=\"flex justify-between my-2\">\r\n                                <span className=\"text-gray-600\">Subtotal</span>\r\n                                <span className=\"font-medium\">\r\n                                    ${cartItems.reduce((total, item) => {\r\n                                        const product = products[item.product_id];\r\n                                        return total + (product ? parseFloat(product.price) * item.quantity : 0);\r\n                                    }, 0).toFixed(2)}\r\n                                </span>\r\n                            </div>\r\n                            <div className=\"flex justify-between my-2\">\r\n                                <span className=\"text-gray-600\">Shipping</span>\r\n                                <span className=\"font-medium\">$5.99</span>\r\n                            </div>\r\n                            <div className=\"flex justify-between my-2\">\r\n                                <span className=\"text-gray-600\">Tax</span>\r\n                                <span className=\"font-medium\">\r\n                                    ${(cartItems.reduce((total, item) => {\r\n                                        const product = products[item.product_id];\r\n                                        return total + (product ? parseFloat(product.price) * item.quantity : 0);\r\n                                    }, 0) * 0.08).toFixed(2)}\r\n                                </span>\r\n                            </div>\r\n                            <div className=\"border-t border-gray-200 mt-4 pt-4 flex justify-between\">\r\n                                <span className=\"text-lg font-bold\">Total</span>\r\n                                <span className=\"text-lg font-bold\">\r\n                                    ${(\r\n                                        cartItems.reduce((total, item) => {\r\n                                            const product = products[item.product_id];\r\n                                            return total + (product ? parseFloat(product.price) * item.quantity : 0);\r\n                                        }, 0) * 1.08 + 5.99\r\n                                    ).toFixed(2)}\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Checkout;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}